<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ChepaMotos.Views.HomeView">

    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="20">

            <!-- Page heading + date/time -->
            <Grid ColumnDefinitions="*,Auto">
                <Label Text="Inicio"
                       Style="{StaticResource PageHeading}" />
                <Label x:Name="DateTimeLabel"
                       Grid.Column="1"
                       FontFamily="IBMPlexMono"
                       FontSize="13"
                       TextColor="{StaticResource TextMuted}"
                       VerticalTextAlignment="Center" />
            </Grid>

            <!-- ═══ KPI Cards (4-column grid) ═══ -->
            <Grid ColumnDefinitions="*,*,*,*"
                  ColumnSpacing="14"
                  RowDefinitions="Auto">

                <!-- KPI 1: Total facturado -->
                <Border Grid.Column="0"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        BackgroundColor="{StaticResource Surface}"
                        Padding="16">
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Total facturado" Style="{StaticResource KpiTitle}" />
                        <Label Text="$1.247.300"
                               Style="{StaticResource KpiValue}"
                               TextColor="{StaticResource Accent}" />
                        <Label Text="12 facturas hoy"
                               FontFamily="IBMPlexMono" FontSize="11"
                               TextColor="{StaticResource TextMuted}" />
                    </VerticalStackLayout>
                </Border>

                <!-- KPI 2: Corte taller -->
                <Border Grid.Column="1"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        BackgroundColor="{StaticResource Surface}"
                        Padding="16">
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Corte taller" Style="{StaticResource KpiTitle}" />
                        <Label Text="$374.190"
                               Style="{StaticResource KpiValue}"
                               TextColor="{StaticResource Green}" />
                        <Label Text="30% del total"
                               FontFamily="IBMPlexMono" FontSize="11"
                               TextColor="{StaticResource TextMuted}" />
                    </VerticalStackLayout>
                </Border>

                <!-- KPI 3: Factura promedio -->
                <Border Grid.Column="2"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        BackgroundColor="{StaticResource Surface}"
                        Padding="16">
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Factura promedio" Style="{StaticResource KpiTitle}" />
                        <Label Text="$103.941"
                               Style="{StaticResource KpiValue}" />
                        <Label Text="servicio + venta"
                               FontFamily="IBMPlexMono" FontSize="11"
                               TextColor="{StaticResource TextMuted}" />
                    </VerticalStackLayout>
                </Border>

                <!-- KPI 4: Mecánicos activos -->
                <Border Grid.Column="3"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        BackgroundColor="{StaticResource Surface}"
                        Padding="16">
                    <VerticalStackLayout Spacing="6">
                        <Label Text="Mecánicos activos" Style="{StaticResource KpiTitle}" />
                        <Label Text="4"
                               Style="{StaticResource KpiValue}" />
                        <Label Text="de 6 registrados"
                               FontFamily="IBMPlexMono" FontSize="11"
                               TextColor="{StaticResource TextMuted}" />
                    </VerticalStackLayout>
                </Border>
            </Grid>

            <!-- ═══ Two-column panel: Invoices table + Mechanics list ═══ -->
            <Grid ColumnDefinitions="2*,*"
                  ColumnSpacing="14"
                  RowDefinitions="*">

                <!-- Left: Recent invoices table -->
                <Border Grid.Column="0"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        BackgroundColor="{StaticResource Surface}"
                        Padding="0">
                    <VerticalStackLayout Spacing="0">

                        <!-- Table title -->
                        <Label Text="Facturas recientes"
                               Style="{StaticResource SectionHeading}"
                               Padding="16,14,16,10" />

                        <!-- Table header row -->
                        <Grid ColumnDefinitions="60,80,*,100,100,80"
                              Padding="16,8"
                              BackgroundColor="{StaticResource Surface2}">
                            <Label Grid.Column="0" Text="#" Style="{StaticResource TableHeader}" />
                            <Label Grid.Column="1" Text="TIPO" Style="{StaticResource TableHeader}" />
                            <Label Grid.Column="2" Text="PLACA / COMPRADOR" Style="{StaticResource TableHeader}" />
                            <Label Grid.Column="3" Text="MECÁNICO" Style="{StaticResource TableHeader}" />
                            <Label Grid.Column="4" Text="TOTAL" Style="{StaticResource TableHeader}" HorizontalTextAlignment="End" />
                            <Label Grid.Column="5" Text="HORA" Style="{StaticResource TableHeader}" HorizontalTextAlignment="End" />
                        </Grid>

                        <!-- Dynamic invoice rows -->
                        <VerticalStackLayout x:Name="InvoiceRowsContainer" Spacing="0" />

                    </VerticalStackLayout>
                </Border>

                <!-- Right: Mechanics list -->
                <Border Grid.Column="1"
                        Stroke="{StaticResource Border}"
                        StrokeShape="RoundRectangle 8"
                        StrokeThickness="1"
                        BackgroundColor="{StaticResource Surface}"
                        Padding="0">
                    <VerticalStackLayout Spacing="0">

                        <Label Text="Mecánicos"
                               Style="{StaticResource SectionHeading}"
                               Padding="16,14,16,10" />

                        <!-- Mechanic 1 -->
                        <Grid ColumnDefinitions="*,Auto,Auto"
                              Padding="16,10">
                            <Label Grid.Column="0" Text="Jose" Style="{StaticResource TableCell}" />
                            <Border Grid.Column="1" Style="{StaticResource Badge}" BackgroundColor="{StaticResource GreenLight}">
                                <Label Text="Activo" FontFamily="IBMPlexSansMedium" FontSize="11" TextColor="{StaticResource Green}" />
                            </Border>
                            <Label Grid.Column="2" Text="5 fact."
                                   FontFamily="IBMPlexMono" FontSize="11"
                                   TextColor="{StaticResource TextMuted}"
                                   VerticalTextAlignment="Center"
                                   Margin="8,0,0,0" />
                        </Grid>
                        <BoxView HeightRequest="1" Color="{StaticResource Border}" />

                        <!-- Mechanic 2 -->
                        <Grid ColumnDefinitions="*,Auto,Auto"
                              Padding="16,10">
                            <Label Grid.Column="0" Text="Carlos" Style="{StaticResource TableCell}" />
                            <Border Grid.Column="1" Style="{StaticResource Badge}" BackgroundColor="{StaticResource GreenLight}">
                                <Label Text="Activo" FontFamily="IBMPlexSansMedium" FontSize="11" TextColor="{StaticResource Green}" />
                            </Border>
                            <Label Grid.Column="2" Text="3 fact."
                                   FontFamily="IBMPlexMono" FontSize="11"
                                   TextColor="{StaticResource TextMuted}"
                                   VerticalTextAlignment="Center"
                                   Margin="8,0,0,0" />
                        </Grid>
                        <BoxView HeightRequest="1" Color="{StaticResource Border}" />

                        <!-- Mechanic 3 -->
                        <Grid ColumnDefinitions="*,Auto,Auto"
                              Padding="16,10">
                            <Label Grid.Column="0" Text="Pedro" Style="{StaticResource TableCell}" />
                            <Border Grid.Column="1" Style="{StaticResource Badge}" BackgroundColor="{StaticResource GreenLight}">
                                <Label Text="Activo" FontFamily="IBMPlexSansMedium" FontSize="11" TextColor="{StaticResource Green}" />
                            </Border>
                            <Label Grid.Column="2" Text="2 fact."
                                   FontFamily="IBMPlexMono" FontSize="11"
                                   TextColor="{StaticResource TextMuted}"
                                   VerticalTextAlignment="Center"
                                   Margin="8,0,0,0" />
                        </Grid>
                        <BoxView HeightRequest="1" Color="{StaticResource Border}" />

                        <!-- Mechanic 4 -->
                        <Grid ColumnDefinitions="*,Auto,Auto"
                              Padding="16,10">
                            <Label Grid.Column="0" Text="Miguel" Style="{StaticResource TableCell}" />
                            <Border Grid.Column="1" Style="{StaticResource Badge}" BackgroundColor="{StaticResource GreenLight}">
                                <Label Text="Activo" FontFamily="IBMPlexSansMedium" FontSize="11" TextColor="{StaticResource Green}" />
                            </Border>
                            <Label Grid.Column="2" Text="2 fact."
                                   FontFamily="IBMPlexMono" FontSize="11"
                                   TextColor="{StaticResource TextMuted}"
                                   VerticalTextAlignment="Center"
                                   Margin="8,0,0,0" />
                        </Grid>

                    </VerticalStackLayout>
                </Border>

            </Grid>

        </VerticalStackLayout>
    </ScrollView>

</ContentView>
